<div class="user-background" style="background-image: url('https://images.pexels.com/photos/175039/pexels-photo-175039.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260');">

  <div class="main-container">
    <div class="tabs">
      <a href="#" class="tab tab-first active">Profile</a>
      <a href="#" class="tab tab-second">Listings</a>
      <a href="#" class="tab tab-last">Bookings</a>
      <a href="#" class="new-listing-btn">New Listing</a>
    </div>

    <div class="user-details">
      <div class="user-details-top">
        <h3><%= @user.name %>'s Profile</h3>
        <p><%= link_to "Edit my Details", edit_user_registration_path, class: "btn btn-danger" %></p>
      </div>
      <p>Location: <%= @user.location %></p>
    </div>

    <div class="user-my-listings hidden">
      <ul class="listings-list">
        <li class="each-listing listing-title">
          <div>Category</div>
          <div>Description</div>
          <div>Price</div>
          <div>Status</div>
        </li>
        <% @user.listings.each do |listing| %>
        <li class="each-listing" style="overflow-y: scroll; height:100px;">
          <div>
            <%= link_to listing.category, listing_path(listing) %>
          </div>
          <div>
            <%= listing.description %>
          </div>
          <div>
            <%= listing.price %>
          </div>
          <div>
            <div class="delete-listing">
              <%= link_to 'Delete', listing_path(listing),
              method: :delete, class: 'btn btn-warning',
              data: { confirm: "Are you sure?" } %>
              <% if listing.available %>
                <p>Available</p>
              <% else %>
                <p>Booked</p>
              <% end %>
            </div>
          </div>
          <% end %>
        </li>
      </ul>
    </div>

    <div class="user-listings-form hidden">
      <div>
        <h3>Add a new listing</h3>

        <%= simple_form_for(Listing.new) do |f| %>
        <%= f.input :category %>
        <%= f.input :description %>
        <%= f.input :price %>
        <%= f.input :photo %>
        <%= f.input :photo_cache, as: :hidden %>
        <%= f.submit "Add"%>
        <% end %>
      </div>
    </div>

    <div class="user-my-bookings hidden">
      <ul class="listings-list">
        <li class="each-listing listing-title">
          <div>Status</div>
          <div>Total Price</div>
          <div>Edit</div>
        </li>
        <% @user.bookings.each do |booking| %>
        <li class="each-listing">
            <div>
              <%= booking.status %>
              <% if current_user == booking.listing.user %>
                <%= form_for(booking) do |f| %>
                  <%= f.hidden_field :status, value: 'confirmed' %>
                  <%= f.submit :confirm, class: 'btn btn-success' %>
                <% end %>
                <%= form_for(booking) do |f| %>
                  <%= f.hidden_field :status, value: 'declined' %>
                  <%= f.submit :decline, class: 'btn btn-danger' %>
                <% end %>
              <% end %>
            </div>
          <div>
            <%= booking.total_price %>
          </div>
          <div>
          </div>
          <% end %>
        </li>
      </ul>

    </div>

  </div>

</div>
